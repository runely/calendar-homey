<html>
  <head>
    <style>
      /* Example of a custom CSS class. */
      .custom-image-class {
        margin: var(--homey-su-3) auto var(--homey-su-5);
      }

      .no-wrap {
        white-space: nowrap;
      }

      .homey-calendar-icon {
        -webkit-mask-image: url('icons/calendar-icon.svg'); /* Browser support. */
        mask-image: url('icons/calendar-icon.svg');
      }
    </style>
  </head>

  <body class="homey-widget-full">
    <table class="homey-table-striped text-align-center">
      <tbody>
      </tbody>
    </table>

    <script type="text/javascript">
      function onHomeyReady(Homey) {
        Homey.ready();
        const tbody = document.querySelector('tbody');

        // View the settings the user provided if your widget has settings.
        console.log('Widget settings:', Homey.getSettings());

        // Fetch something from your app.
        Homey.api('GET', '/calendar/list', {})
          .then((eventsByDay) => {
            eventsByDay.forEach((event, index) => {
              // Access the dayCell, summaryCell, and calendarCell for each event
              const { dayInfo, summaryInfo, calendarInfo } = event;
              const row = document.createElement('tr');

              const dayCell = document.createElement('td');
              dayCell.setAttribute('class', 'no-wrap');
              dayCell.innerHTML = dayInfo;
              row.appendChild(dayCell);

                // Create and append the second column (age)
              const summaryCell = document.createElement('td');
              summaryCell.innerHTML = summaryInfo;
              row.appendChild(summaryCell);

              const calendarCell = document.createElement('td');
              calendarCell.innerHTML = calendarInfo;
              row.appendChild(calendarCell);

              // Append the row to the tbody
              tbody.appendChild(row);
            });
          })
          .catch(console.error);
      }
    </script>
  </body>
</html>